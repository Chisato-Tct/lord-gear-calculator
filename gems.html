<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>宝石計算ツール</title>
  <style>
    body { font-family: sans-serif; }
    table { border-collapse: collapse; }
    th, td { border: 1px solid #999; padding: 6px 10px; text-align: center; }
    .red { color: red; font-weight: bold; }
  </style>
</head>
<body>

<h1>宝石計算ツール</h1>

<p>現在Lvと目標Lvを選択してください（Lv2〜14）</p>

<label>
  現在Lv：
  <select id="currentLv"></select>
</label>

<label>
  目標Lv：
  <select id="targetLv"></select>
</label>

<h3>所持数</h3>
<label>Charm Guides：<input type="number" id="haveGuides" value="0"></label><br>
<label>Charm Designs：<input type="number" id="haveDesigns" value="0"></label><br><br>

<button onclick="calculate()">計算する</button>

<hr>

<h2>計算結果</h2>
<div id="result">ここに結果が表示されます</div>

<script>
/* ===== マスターデータ（Lv2〜14） ===== */
const MASTER = {
  2:  { g: 40,  d: 15 },
  3:  { g: 60,  d: 40 },
  4:  { g: 80,  d: 100 },
  5:  { g: 100, d: 200 },
  6:  { g: 120, d: 300 },
  7:  { g: 140, d: 400 },
  8:  { g: 200, d: 400 },
  9:  { g: 300, d: 400 },
  10: { g: 420, d: 420 },
  11: { g: 560, d: 420 },
  12: { g: 580, d: 600 },
  13: { g: 610, d: 780 },
  14: { g: 645, d: 960 }
};

/* プルダウン初期化 */
const cur = document.getElementById("currentLv");
const tgt = document.getElementById("targetLv");
for (let i = 2; i <= 14; i++) {
  cur.innerHTML += `<option value="${i}">${i}</option>`;
  tgt.innerHTML += `<option value="${i}">${i}</option>`;
}

/* 計算 */
function calculate() {
  const c = Number(cur.value);
  const t = Number(tgt.value);
  if (t <= c) {
    document.getElementById("result").innerText = "目標Lvは現在Lvより大きくしてください";
    return;
  }

  let needG = 0, needD = 0;
  for (let lv = c + 1; lv <= t; lv++) {
    needG += MASTER[lv].g;
    needD += MASTER[lv].d;
  }

  const haveG = Number(document.getElementById("haveGuides").value);
  const haveD = Number(document.getElementById("haveDesigns").value);

  const lackG = needG - haveG;
  const lackD = needD - haveD;

  document.getElementById("result").innerHTML = `
    <p>必要 Guides：${needG}</p>
    <p>必要 Designs：${needD}</p>
    <hr>
    <p>不足 Guides：${lackG > 0 ? `<span class="red">${lackG}</span>` : 0}</p>
    <p>不足 Designs：${lackD > 0 ? `<span class="red">${lackD}</span>` : 0}</p>
  `;
}
</script>

</body>
</html>
